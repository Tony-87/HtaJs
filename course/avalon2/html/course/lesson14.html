<!DOCTYPE html>
<html lang="en">
<head>
    <title>ms-validate</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <script src="../../js/avalon.js"></script>
    <script src="../../js/jquery-1.7.2.min.js"></script>

    <style>
        .ani{
            width:100px;
            height:100px;
            background: #29b6f6;
        }
    </style>
    <script>
        avalon.effect('animate', {
            enter: function(el, done){
                $(el).animate({width: 300},1000,done)
            },
            leave: function(el, done){
                $(el).animate({width: 100},1000,done)
            }
        })
        var vm = avalon.define({
            $id: 'effect',
            aaa: "test",
            action: 'enter',
            enterCb: function(){
                avalon.log('动画完成')
            },
            leaveCb: function(){
                avalon.log('动画回到原点')
            }
        })


    </script>
</head>

<body>    <div ms-controller='effect' >
    <div class='ani' ms-effect="{is:'animate', action:@action,onEnterDone: @enterCb,onLeaveDone: @leaveCb}">
        {{@aaa}}
    </div>
    <button ms-click='@action = @action !== "leave" ? "leave": "enter"'
            type="button">click</button>
</div>
</body>
</html>